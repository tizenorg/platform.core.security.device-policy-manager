@startuml
namespace IPC {

class Socket
class Message <DataType, Transmitter>

Message ..> Message : create for reply or error

class Connection <MainloopContext>

Connection "1" *--> "1" Socket
Connection ..> Message : create

class Mainloop

class Client <RequestType, ResponseType>

Client "1" *-left-> "1" Connection

class Service


Service -right-> "1..*" Connection
Service *--> "1" Mainloop

}

namespace DevicePolicyManager {
class Server

Server *-- "1" IPC.Service
}

namespace DevicePolicyClient {

class PolicyClient <Request, Response>

PolicyClient *-- "1" IPC.Client

}

@enduml


